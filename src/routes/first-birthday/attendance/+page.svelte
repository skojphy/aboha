<script>
	import { enhance } from '$app/forms';
	import dol from '$lib/dol/images/dol.png';
	let dialog;

	const onSubmit = () => {
		dialog.showModal();
		return true;
	};
</script>

<header>
	<h1>ğŸŒ¸ ì°¸ì„ ì˜ì‚¬ ì „ë‹¬ ğŸŒ¸</h1>
</header>
<main class="container">
	<img src={dol} alt="ì•„ë³´í•˜ ëŒ ì‚¬ì§„" />
	<section class="attendance">
		<form
			method="POST"
			action="?/submitForm"
			use:enhance={() => {
				return async ({ result }) => {
					if (result.type === 'error') {
						window.alert('ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
					}
					setTimeout(() => {
						window.location.href = '../first-birthday';
					}, 1800);
				};
			}}
			on:submit={onSubmit}
		>
			<div class="input-container">
				<label class="text-input" for="nickname"
					><span>ì´ë¦„ </span>
					<input type="text" name="nickname" placeholder="ë‹‰ë„¤ì„/ë³¸ëª…" required />
				</label>

				<label class="text-input" for="account"
					><span>í™˜ê¸‰ ê³„ì¢Œ</span>
					<input type="text" name="account" placeholder="ìˆ«ìë§Œ ì ì–´ ì£¼ì„¸ìš”" required />
				</label>

				<label class="text-input" for="bank"
					><span>ì€í–‰</span>
					<input type="text" name="bank" placeholder="ì˜ˆ) ì•„ë³´í•˜ë±…í¬" required />
				</label>

				<label class="text-input" for="arrival"
					><span>ì°¸ì„ ì‹œê°„</span>
					<input type="text" name="arrival" placeholder="ì˜ˆ) ëŠ¦ì°¸ - 20ì‹œ, ì •ì‹œ ì°¸ì—¬" required />
				</label>

				<label class="text-input" for="leave"
					><span>í‡´ê·¼ ì‹œê°„</span>
					<input type="text" name="leave" placeholder="ì˜ˆ) ì˜¬ë‚˜ì‡, ì¡°í‡´ - 23ì‹œ" required />
				</label>

				<div class="text-input">
					<span>ë³´ë“œê²Œì„ ê°€ì ¸ì˜¤ì„¸ìš”?</span>
					<label>
						<input type="radio" name="boardgame" value="yes" />
						<span>ì˜ˆ</span>
					</label>

					<label>
						<input type="radio" name="boardgame" value="no" />
						<span>ì•„ë‹ˆìš”</span>
					</label>
				</div>
			</div>

			<div class="buttons">
				<button type="submit">ì œì¶œí•˜ê¸°</button>
			</div>
		</form>
	</section>

	<dialog bind:this={dialog}>
		<h2>ê°ì‚¬í•©ë‹ˆë‹¤.<br />ëŒì”ì¹˜ì—ì„œ ë§Œë‚˜ìš”!</h2>
		ì†Œì¤‘í•œ ê°œì¸ ì •ë³´ëŠ”<br />ëŒì”ì¹˜ ì´í›„ ì¼ê´„ ì‚­ì œí•  ì˜ˆì •ì…ë‹ˆë‹¤.
	</dialog>
</main>

<style>
	/* ì•„ì´í° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” */
	input:not([type='color']),
	button,
	button {
		-webkit-appearance: none;
		-moz-appearance: none;
		appearance: none;
	}

	@font-face {
		font-family: 'Cafe24Oneprettynight';
		font-weight: normal;
		font-style: normal;
		src: url('https://cdn.jsdelivr.net/gh/webfontworld/Cafe24Oneprettynight/Cafe24Oneprettynight.eot');
		src: url('https://cdn.jsdelivr.net/gh/webfontworld/Cafe24Oneprettynight/Cafe24Oneprettynight.eot?#iefix')
				format('embedded-opentype'),
			url('https://cdn.jsdelivr.net/gh/webfontworld/Cafe24Oneprettynight/Cafe24Oneprettynight.woff2')
				format('woff2'),
			url('https://cdn.jsdelivr.net/gh/webfontworld/Cafe24Oneprettynight/Cafe24Oneprettynight.woff')
				format('woff'),
			url('https://cdn.jsdelivr.net/gh/webfontworld/Cafe24Oneprettynight/Cafe24Oneprettynight.ttf')
				format('truetype');
		font-display: swap;
	}

	@font-face {
		font-family: 'Cafe24Shiningstar';
		src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Cafe24Shiningstar.woff')
			format('woff');
		font-weight: normal;
		font-style: normal;
	}

	main {
		padding: 0;
		display: flex;
		flex-direction: column;
		align-items: center;
		font-family: 'Cafe24Oneprettynight', Calibri, 'Trebuchet MS', sans-serif;
	}

	h1 {
		font-family: 'Cafe24Shiningstar';
	}

	img {
		width: 85vw;
	}

	form {
		display: flex;
		flex-direction: column;
		align-items: center;
		margin: 20px 0;
	}

	.text-input {
		width: 85vw;
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		margin: 15px 0;
	}

	.text-input span {
		font-size: 0.9em;
	}

	.text-input [type='text'] {
		width: 60vw;
		border: none;
		background-color: #e0e3de;
		color: #66725d;
		border-radius: 5px;
		padding: 0 7px;
	}

	.text-input input::placeholder {
		font-size: 0.8em;
	}

	input {
		height: 1.8rem;
	}

	[type='radio'],
	span {
		vertical-align: middle;
	}

	[type='radio'] {
		appearance: none;
		border: max(2px, 0.1em) solid gray;
		border-radius: 50%;
		width: 1.15em;
		height: 1.15em;
		transition: border 0.5s ease-in-out;
	}

	[type='radio']:checked {
		border: 0.35em solid #66725d;
	}

	[type='radio']:focus-visible {
		outline-offset: max(2px, 0.1em);
		outline: max(2px, 0.1em) dotted #66725d;
	}

	[type='radio']:hover {
		box-shadow: 0 0 0 max(4px, 0.2em) lightgray;
		cursor: pointer;
	}

	.input-container {
		min-height: 65vh;
	}

	.buttons button {
		width: 100vw;
		height: 3.5rem;
		border: none;
		position: fixed;
		left: 0;
		bottom: 0;
		background-color: #e0e3de;
	}

	dialog {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 70vw;
		border: none;
		border-radius: 10px;
		color: #66725d;
		text-align: center;
		padding: 20px;
		box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px,
			rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px,
			rgba(0, 0, 0, 0.09) 0px -3px 5px;
	}

	dialog h2 {
		font-family: 'Cafe24Shiningstar';
		font-size: 1.5rem;
		margin: 0 0 15px 0;
	}
</style>
